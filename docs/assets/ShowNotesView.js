import{a1 as ee,f as h,d as E,o as c,a as v,e as f,t as T,l as s,F as D,a3 as te,$ as W,z as q,j as l,a8 as ae,s as se,i as o,x as R,y as F,b as j,u as oe,g as Z,k as X,v as J,p as ue,h as ce,m as de,a4 as he,w as P,a5 as me,M as fe,a2 as pe}from"./vendor.js";import{u as N,a as H}from"./useEmitter.js";import{c as ve}from"./usePageToolkits.js";import{a as be,h as _e,g as ye,_ as ge}from"./ArticleCardsAuthors.vue_vue_type_script_setup_true_lang.js";import{_ as K,W as we}from"./MarkdownWorker.vue_vue_type_script_setup_true_lang.js";import{B as O}from"./BodyBlock.js";import{_ as ke}from"./AnchorElement.vue_vue_type_script_setup_true_lang.js";import{T as $e}from"./TitleBlock.js";import{_ as ie}from"./_plugin-vue_export-helper.js";import"./WaveLoading.vue_vue_type_style_index_0_scoped_df7ac771_lang.js";import"./PlaceholderBlock.vue_vue_type_script_setup_true_lang.js";/* empty css                                                          */const Me=ee("arrow-left",!0,function(t){return h("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},[h("path",{d:"M5.79889 24H41.7989",stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin},null),h("path",{d:"M17.7988 36L5.79883 24L17.7988 12",stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin},null)])}),xe=async function(t,e,i=()=>{}){await be.get(t).then(function(a){e(a.data)}).catch(i)},Ce={class:"w-32 inline-block align-top"},Se={class:"w-12 rounded-full overflow-hidden mx-auto"},Be=["src","alt"],Ae={class:"text-center text-sm p-3 font-light"},Ie=E({__name:"ArticleAuthorBlock",props:{author:null},setup(t){return(e,i)=>(c(),v("div",Ce,[f("div",Se,[f("img",{src:t.author.avatar,alt:t.author.name},null,8,Be)]),f("div",Ae,T(t.author.name),1)]))}}),We={key:0,class:"mt-10"},Ee=f("div",{class:"w-48 border-b-2 border-b-gray-400 mx-auto my-3"},null,-1),Le=E({__name:"ArticleAuthors",props:{author:null},setup(t){return(e,i)=>s(_e)(t.author)?(c(),v("div",We,[(c(!0),v(D,null,te(s(ye)(t.author),a=>(c(),q(Ie,{key:a.id,author:a},null,8,["author"]))),128)),Ee])):W("",!0)}}),Te=ee("youtobe",!0,function(t){return h("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},[h("path",{d:"M44 32.7679V15.2321C44 13.9073 43.1298 12.7428 41.8448 12.4204C38.3687 11.5484 31.1843 10 24 10C16.8157 10 9.63134 11.5484 6.15517 12.4204C4.87016 12.7428 4 13.9073 4 15.2321V32.7679C4 34.0927 4.87016 35.2572 6.15517 35.5796C9.63133 36.4516 16.8157 38 24 38C31.1843 38 38.3687 36.4516 41.8448 35.5796C43.1298 35.2572 44 34.0927 44 32.7679Z",fill:t.colors[1],stroke:t.colors[0],"stroke-width":t.strokeWidth},null),h("path",{d:"M22.5735 29.8986C21.9107 30.3625 21 29.8884 21 29.0793V18.9207C21 18.1116 21.9107 17.6375 22.5735 18.1014L29.8297 23.1808C30.3984 23.5789 30.3984 24.4211 29.8297 24.8192L22.5735 29.8986Z",fill:t.colors[3],stroke:t.colors[2],"stroke-width":t.strokeWidth,"stroke-linejoin":t.strokeLinejoin},null)])}),Ve=["width","height","src","data-lazy-src"],ze=E({__name:"YoutubeEmbedBlock",props:{yid:null,autoplay:{type:Boolean,default:!1},aspectWidth:null,aspectHeight:null,width:{default:480},height:null,iframeClass:{default:""},timestamp:{default:0}},setup(t){const e=t,i=N(),a=H(),u=l(null),{width:b,height:_}=ae(u);se(b,n=>{_.value=C(n),M.value=_.value});const r=l(0),p=l(0),w=l(0),M=l(),k=l(!1),x=o(()=>`&start=${r.value}`),C=n=>n*w.value/p.value,B=o(()=>{if(e.height)return e.height;if(typeof e.width=="number")return C(e.width);if(e.width.trim().endsWith("px")){const n=Number(e.width.replace("px",""));return C(n)}else if(e.width.trim().endsWith("%")){let n=Number(e.width.replace("%",""));return n=n>=0&&n<=100?n:100,`${n}%`}return 360}),$=o(()=>k.value?1:0),d=o(()=>`https://www.youtube.com/embed/${e.yid}?autoplay=${$.value}`),A=o(()=>`${d.value}${x.value}`),m=l(!0),g=l(!1),I=o(()=>g.value?"":m.value?A.value:d.value);return R(async()=>{var n,L;r.value=e.timestamp,w.value=((n=e.aspectHeight)!=null?n:i.isMobileMode)?9:3,p.value=((L=e.aspectWidth)!=null?L:i.isMobileMode)?16:4,M.value=e.height,k.value=e.autoplay,a.on("updateTimeStamp",V=>{const S=V;S.to==="youtube"&&(r.value=S.timestamp,k.value=!0,m.value=!0)}),a.on("pauseEmbedPlayer",V=>{const S=V;S.to==="youtube"&&(S.status?g.value=!0:(g.value=!1,m.value=!1))})}),F(()=>{a.off("updateTimeStamp"),a.off("pauseEmbedPlayer")}),(n,L)=>(c(),v("div",{class:"w-full",ref_key:"mediaRef",ref:u},[f("iframe",{id:"youtube-iframe",loading:"lazy",width:s(b),height:s(B),src:s(I),"data-lazy-src":s(I),allowFullScreen:!0,class:j({iframeClass:t.iframeClass}),scrolling:"no",border:"0",frameborder:"0",framespacing:"0","data-ll-status":"loaded",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"},null,10,Ve)],512))}}),Ne="av",ne=[9,8,1,6,2,4,0,7,3,5],He=BigInt("58"),Pe=BigInt("0"),je=BigInt("100618342136696320"),De=BigInt("177451812"),re="fZodR9XQDSUm21yCkr6zBqiveYah8bt4xsWpHnJE7jL5VG3guMTKNPAwcF",Re=new Map(Array.from(re).map((t,e)=>[t,BigInt(e)])),Fe=new RegExp(`^[Bb][Vv][${re}]{${ne.length}}$`);function Ue(t){if(typeof t!="string"||!Fe.test(t)){const u=new Error("Invalid BV, should be a string starting with BV or bv.");throw u.code="EINVALID_BV",u}const e=t.substring(2),a=ne.reduceRight((u,b)=>u*He+Re.get(e[b]),BigInt(0))-je^De;if(a<Pe){const u=new Error("Invalid BV, converted AV is negative");throw u.code="EAV_NEGATIVE",u}return`${Ne}${a}`}const Ye=t=>Ue(t),Qe=t=>{let e=0;return fetch(`https://api.bilibili.com/x/web-interface/view?aid=${t}`).then(i=>i.json()).then(i=>{const a=i.data;a?e=Number.parseInt(a.cid):e=-1}),e},qe=["width","height","src","data-lazy-src"],Ze=E({__name:"BilibiliEmbedBlock",props:{bvid:null,page:{default:1},autoplay:{type:Boolean,default:!1},isWide:{type:Boolean,default:!0},highQuality:{type:Boolean,default:!0},hasDanmaku:{type:Boolean,default:!1},aspectWidth:null,aspectHeight:null,width:{default:480},height:null,iframeClass:{default:""},timestamp:{default:0}},setup(t){const e=t,i=N(),a=H(),u=l(null),{width:b,height:_}=ae(u);se(b,y=>{_.value=d(y),M.value=_.value});const r=l(0),p=l(0),w=l(0),M=l(),k=l(!1),x=l(0),C=l(0),B=o(()=>r.value),$=o(()=>C.value),d=y=>y*w.value/p.value,A=o(()=>{if(e.height)return e.height;if(typeof e.width=="number")return d(e.width);if(e.width.trim().endsWith("px")){const y=Number(e.width.replace("px",""));return d(y)}else if(e.width.trim().endsWith("%")){let y=Number(e.width.replace("%",""));return y=y>=0&&y<=100?y:100,`${y}%`}return 360}),m=o(()=>e.highQuality?1:0),g=o(()=>e.isWide?1:0),I=o(()=>k.value?1:0),n=o(()=>e.hasDanmaku?1:0),L=o(()=>`//player.bilibili.com/player.html?aid=${x.value}&bvid=${e.bvid}&page=${e.page}&cid=${$.value}&high_quality=${m.value}&as_wide=${g.value}&danmaku=${n.value}&autoplay=${I.value}`),V=o(()=>`${L.value}&t=${B.value}`),S=l(!0),U=l(!1),G=o(()=>U.value?"":S.value?V.value:L.value);return R(async()=>{var y,Y;x.value=Ye(e.bvid),C.value=Qe(x.value),r.value=e.timestamp,w.value=((y=e.aspectHeight)!=null?y:i.isMobileMode)?9:3,p.value=((Y=e.aspectWidth)!=null?Y:i.isMobileMode)?16:4,M.value=e.height,k.value=e.autoplay,a.on("updateTimeStamp",Q=>{const z=Q;z.to==="bilibili"&&(r.value=z.timestamp,k.value=!0,S.value=!0)}),a.on("pauseEmbedPlayer",Q=>{const z=Q;z.to==="bilibili"&&(z.status?U.value=!0:(U.value=!1,S.value=!1))})}),F(()=>{a.off("updateTimeStamp"),a.off("pauseEmbedPlayer")}),(y,Y)=>(c(),v("div",{class:"w-full",ref_key:"mediaRef",ref:u},[f("iframe",{id:"bilibili-iframe",loading:"lazy",width:s(b),height:s(A),src:s(G),"data-rocket-lazyload":"fitvidscompatible","data-lazy-src":s(G),allowFullScreen:!0,class:j({iframeClass:t.iframeClass}),scrolling:"no",border:"0",frameborder:"0",framespacing:"0","data-ll-status":"loaded",sandbox:"allow-top-navigation allow-same-origin allow-forms allow-scripts"},null,10,qe)],512))}}),le=t=>(ue("data-v-72db4477"),t=t(),ce(),t),Ge={key:0,class:"flex justify-center mb-4"},Xe=le(()=>f("br",null,null,-1)),Je={key:1,class:"flex justify-center mb-4"},Ke={class:"group-btn cursor-pointer"},Oe=le(()=>f("svg",{t:"1701695933999",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1488","data-darkreader-inline-fill":"",width:"16",height:"16"},[f("path",{d:"M977.2 208.2c33.4 36.2 48.8 79.4 46.6 131.4v404.8c-0.8 52.8-18.4 96.2-53 130.2-34.4 34-78.2 51.8-131 53.4H184.04c-52.9-1.6-96.42-19.6-130.56-54.4C19.364 838.8 1.534 793 0 736.4V339.6c1.534-52 19.364-95.2 53.48-131.4C87.62 175.5 131.14 157.54 184.04 156h58.76L192.1 104.38c-11.5-11.46-17.26-26-17.26-43.58 0-17.6 5.76-32.12 17.26-43.594C203.6 5.736 218.2 0 235.8 0s32.2 5.736 43.8 17.206L426.2 156h176l149-138.794C763.4 5.736 778.4 0 796 0c17.6 0 32.2 5.736 43.8 17.206 11.4 11.474 17.2 25.994 17.2 43.594 0 17.58-5.8 32.12-17.2 43.58L789.2 156h58.6c52.8 1.54 96 19.5 129.4 52.2z m-77.6 139.4c-0.8-19.2-7.4-34.8-21.4-47-10.4-12.2-28-18.8-45.4-19.6H192.1c-19.18 0.8-34.9 7.4-47.16 19.6-12.28 12.2-18.8 27.8-19.56 47v388.8c0 18.4 6.52 34 19.56 47s28.76 19.6 47.16 19.6H832.8c18.4 0 34-6.6 46.6-19.6 12.6-13 19.4-28.6 20.2-47V347.6z m-528.6 85.4c12.6 12.6 19.4 28.2 20.2 46.4V546c-0.8 18.4-7.4 33.8-19.6 46.4-12.4 12.6-28 19-47.2 19-19.2 0-35-6.4-47.2-19-12.2-12.6-18.8-28-19.6-46.4v-66.6c0.8-18.2 7.6-33.8 20.2-46.4 12.6-12.6 26.4-19.2 46.6-20 18.4 0.8 34 7.4 46.6 20z m383 0c12.6 12.6 19.4 28.2 20.2 46.4V546c-0.8 18.4-7.4 33.8-19.6 46.4-12.2 12.6-28 19-47.2 19-19.2 0-34.8-6.4-47.2-19-14-12.6-18.8-28-19.4-46.4v-66.6c0.6-18.2 7.4-33.8 20-46.4 12.6-12.6 28.2-19.2 46.6-20 18.4 0.8 34 7.4 46.6 20z","p-id":"1489",fill:"#d4237a","data-darkreader-inline-fill":"",style:{"--darkreader-inline-fill":"#aa1c62"}})],-1)),et=[Oe],tt={key:2,class:"w-full my-6 rounded-lg overflow-hidden shadow"},at={key:3,class:"w-full my-6 rounded-lg overflow-hidden shadow"},st=E({__name:"MediaShell",props:{metadata:null},setup(t){const e=t,i=H(),a=N(),u=l(!1),b=l(e.metadata.bvid),_=o(()=>!!b.value&&b.value.length>0),r=o(()=>b.value),p=l(e.metadata.yid),w=o(()=>!!p.value&&p.value.length>0),M=o(()=>p.value),k=($,d=!1)=>{a.setCurrentMedia($),u.value=d,$==="bilibili"?(i.emit("pauseEmbedPlayer",{status:!1,to:"bilibili"}),i.emit("pauseEmbedPlayer",{status:!0,to:"youtube"})):(i.emit("pauseEmbedPlayer",{status:!0,to:"bilibili"}),i.emit("pauseEmbedPlayer",{status:!1,to:"youtube"}))},x=()=>{if(u.value)return;const $=_.value,d=w.value;if(!$&&!d){a.setCurrentMedia("none");return}if($&&!d){a.setCurrentMedia("bilibili");return}if(d&&!$){a.setCurrentMedia("youtube");return}a.locale==="zh"?a.setCurrentMedia("bilibili"):a.setCurrentMedia("youtube")},C=oe(),B=o(()=>C.value?"#f8f8f8":"#000000");return R(()=>{i.on("toChangeLocale",x),x()}),F(()=>{i.off("toChangeLocale")}),($,d)=>(c(),v(D,null,[s(a).currentMedia==="none"?(c(),v("div",Ge,[Z(" 暂无资源 "),Xe,Z("No resources ")])):(c(),v("div",Je,[f("div",Ke,[s(_)?(c(),v("button",{key:0,onClick:d[0]||(d[0]=A=>k("bilibili",!0)),class:j(["group-btn-text",{"group-btn-current":s(a).currentMedia==="bilibili"}])},et,2)):W("",!0),s(w)?(c(),v("button",{key:1,onClick:d[1]||(d[1]=A=>k("youtube",!0)),class:j(["group-btn-text",{"group-btn-current":s(a).currentMedia==="youtube"}])},[h(s(Te),{class:"sort-btn-icon",size:"16",fill:s(B)},null,8,["fill"])],2)):W("",!0)])])),s(_)?X((c(),v("div",tt,[h(Ze,{bvid:s(r),width:""},null,8,["bvid"])],512)),[[J,s(a).currentMedia==="bilibili"]]):W("",!0),s(w)?X((c(),v("div",at,[h(ze,{yid:s(M),width:""},null,8,["yid"])],512)),[[J,s(a).currentMedia==="youtube"]]):W("",!0)],64))}});const ot=ie(st,[["__scopeId","data-v-72db4477"]]),it=H(),nt=(t,e)=>{it.emit("updateTimeStamp",{timestamp:t,to:e})},rt={key:0,class:"p-5"},lt=["onClick"],ut={class:"block flex-1"},ct=E({__name:"MediaTimeStampBlock",props:{metadata:null},setup(t){const e=t,i=N(),a=o(()=>!!e.metadata.timestamp&&e.metadata.timestamp.length>0),u=o(()=>e.metadata.timestamp),b=_=>{i.currentMedia!=="none"&&nt(_,i.currentMedia)};return(_,r)=>s(a)?(c(),v("div",rt,[(c(!0),v(D,null,te(s(u),(p,w)=>(c(),v("div",{key:w,class:"flex gap-4"},[f("a",{class:"block flex-none w-12 text-right text-sky-600 hover:text-sky-900 font-mono underline hover:underline underline-offset-2",onClick:de(M=>b(p.stamp),["prevent"])},T(p.displayTime),9,lt),f("span",ut,T(p.content),1)]))),128))])):W("",!0)}}),dt={class:"content-paper relative"},ht={class:"absolute top-10 left-5"},mt={class:"text-center w-10/12 mx-auto lg:w-4/6 xl:1/2"},ft={class:"px-5 pt-1 text-sm text-gray-500"},pt={key:0},vt={class:"makers"},bt={class:"font-bold"},_t=E({__name:"ShowNotesView",setup(t){const e=fe(),i=me(),a=H(),u=N(),b=l(u.locale),_=o(()=>e.params.pathMatch.join("/")),r=he({}),p=l(!1),w=o(()=>`show-notes/${_.value}/preface`),M=o(()=>`show-notes/${_.value}/content`),k=async m=>{const g=m!=null?m:b.value,I=`/content/show-notes/${_.value}/metadata.${g}.json`;await xe(I,n=>{r.id=n.id,r.title=n.title,r.date=n.date,r.author=n.author,r.img=n.img,r.url=n.url,r.bvid=n.bvid,r.yid=n.yid,r.timestamp=n.timestamp,ve(r.title,"direct"),p.value=!0})},x=o(()=>r.title),C=o(()=>r.date),B=o(()=>r.author),$=(m,g)=>pe(m,g,{locales:u}).value,d=oe(),A=o(()=>d.value?"#f8f8f8":"#000000");return R(async()=>{a.on("toChangeLocale",async m=>{const g=m;b.value=g.locale;try{await k(g.locale),a.emit("toRerenderMarkdown",{source:M.value,locale:g.locale})}catch(I){await i.push({path:"/404"})}}),await k()}),F(()=>{a.off("toChangeLocale")}),(m,g)=>(c(),v(D,null,[p.value?(c(),q(O,{key:0},{default:P(()=>[h(ot,{metadata:r},null,8,["metadata"])]),_:1})):(c(),q(we,{key:1})),h(O,null,{default:P(()=>[f("div",dt,[f("div",ht,[h(ke,{href:"/show-notes","route-name":"home",title:m.$t("home"),mode:"h5"},{default:P(()=>[h(s(Me),{theme:"filled",size:"36",fill:s(A)},null,8,["fill"])]),_:1},8,["title"])]),f("div",mt,[h($e,{"with-placeholder":!1,"is-font-black":!1},{default:P(()=>[Z(T(s(x)),1)]),_:1}),h(Le,{author:s(B)},null,8,["author"]),f("div",ft,T($(new Date(s(C)),m.$t("_common.date-format"))),1)]),h(K,{source:s(w),i18n:!0,"fallback-locale":"en","final-fallback-fn":()=>s(i).push({path:"/404"})},null,8,["source","final-fallback-fn"]),p.value?(c(),v("div",pt,[h(ct,{metadata:r},null,8,["metadata"])])):W("",!0),h(K,{source:s(M),i18n:!0,"fallback-locale":"en","final-fallback-fn":()=>s(i).push({path:"/404"})},null,8,["source","final-fallback-fn"]),f("div",vt,[f("p",bt,T(m.$t("2f.producers-of-this-episode")),1),h(ge,{author:s(B),"display-author-mode":"all-but-avatar","display-author-by":!1,"display-conjunctions":!1,"use-extend-strategy":[{key:"speaker",mode:"i18n"},{key:"host",mode:"i18n"}]},null,8,["author"])])])]),_:1})],64))}});const Wt=ie(_t,[["__scopeId","data-v-3111324b"]]);export{Wt as default};
